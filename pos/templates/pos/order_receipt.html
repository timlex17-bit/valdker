<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Receipt</title>

  <style>
    @page { size: 164pt 1000pt; margin: 6pt; } /* 58mm width */
    html, body {
      margin: 0; padding: 0;
      font-family: "Courier New", Courier, monospace;
      font-size: 9.5pt;
      color: #000;
    }
    .paper { width: 164pt; }

    .center { text-align: center; }
    .bold { font-weight: 700; }
    .muted { color: #222; }

    .logo {
      width: 75pt;
      height: auto;
      display: block;
      margin: 0 auto 6pt;
    }

    .sep {
      margin: 6pt 0;
      font-size: 9.5pt;
      line-height: 1;
      white-space: nowrap;
      overflow: hidden;
    }

    table { width: 100%; border-collapse: collapse; }
    td { padding: 2pt 0; vertical-align: top; }

    .right { text-align: right; white-space: nowrap; }
    .small { font-size: 8.5pt; }

    .item-name { font-weight: 700; padding-top: 4pt; }
    .item-total { font-weight: 700; padding-top: 4pt; }

    .grand td {
      font-size: 12.5pt;
      font-weight: 800;
      padding-top: 6pt;
    }

    .footer {
      text-align: center;
      font-size: 9pt;
      margin-top: 6pt;
    }
  </style>
</head>

<body>
  <div class="paper">

    <!-- HEADER -->
    <div class="center">
      {% if shop.logo %}
        <img class="logo" src="{{ shop.logo.url }}" alt="Logo" />
      {% endif %}
      <div class="bold">{{ shop.name }}</div>
      {% if shop.address %}<div class="muted">{{ shop.address }}</div>{% endif %}
      {% if shop.phone %}<div class="muted">{{ shop.phone }}</div>{% endif %}
    </div>

    <div class="sep">------------------------------------------</div>

    <!-- META -->
    <table>
      <tr><td>Order:</td><td class="right">INV{{ order.id|stringformat:"015d" }}</td></tr>
      <tr><td>Kasir:</td><td class="right">{{ order.served_by.username }}</td></tr>
      <tr><td>Data:</td><td class="right">{{ order.created_at|date:"d/m/y H:i" }}</td></tr>
      {% if order.table_number %}
      <tr><td>Table:</td><td class="right">{{ order.table_number }}</td></tr>
      {% endif %}
      {% if order.delivery_address %}
      <tr><td>Delivery:</td><td class="right">{{ order.delivery_address }}</td></tr>
      {% endif %}
    </table>

    <div class="sep">------------------------------------------</div>

    <!-- ITEMS -->
    {% for item in receipt_items %}
      <table>
        <tr>
          <td class="item-name">{{ item.name }}</td>
          <td class="right item-total">${{ item.line_total|floatformat:2 }}</td>
        </tr>
        <tr>
          <td class="small muted" colspan="2">
            ({{ item.order_type_icon }} {{ item.order_type }})
          </td>
        </tr>
        <tr>
          <td class="small">{{ item.qty }} x ${{ item.unit_price|floatformat:2 }}</td>
          <td class="right small"></td>
        </tr>
      </table>
    {% endfor %}

    <div class="sep">------------------------------------------</div>

    <!-- TOTALS -->
    <table>
      <tr><td class="bold">Subtotal</td><td class="right bold">${{ order.subtotal|floatformat:2 }}</td></tr>
      <tr><td>Discount</td><td class="right">${{ order.discount|floatformat:2 }}</td></tr>
      <tr><td>VAT / Tax</td><td class="right">${{ order.tax|floatformat:2 }}</td></tr>
      {% if order.delivery_fee %}
      <tr><td>Delivery Fee</td><td class="right">${{ order.delivery_fee|floatformat:2 }}</td></tr>
      {% endif %}
      <tr class="grand"><td>Total</td><td class="right">${{ order.total|floatformat:2 }}</td></tr>
    </table>

    <div class="sep">------------------------------------------</div>

    <div class="footer">
      Obrigado ba order ona iha!<br/>
      {{ shop.name }}
    </div>

  </div>
</body>
</html>
